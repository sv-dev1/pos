<div class="p-2">
   <div class="franchise-sec1" >
        <div class="franchise-form franchise-form mb-2 pb-0">
             <div class="franchise-top-header mb-0">
                 <h2 class="heading-name">{{'Highest Sale Report' | translate}}<!-- <span class="heading-name-span">{{franchiseData!.name || 'N/A'}}</span> --></h2>  
             </div>
        </div>
   </div>
   <div class="franchise-form custom-franchise-form pb-0 mb-4 pt-2" >
         <select *ngIf="loginData.userRole == 1" class="form-control custom_select" style="width:30%;margin-bottom: 10px;" (change)="filterForeCasts($event.target.value)" >
            <option value="0">{{'All' | translate}}</option>
            <option *ngFor="let rent of backupdata" value={{rent.franchiseName}}>
            {{rent.franchiseName}}
            </option>
         </select>
         <select *ngIf="dashboardData && dashboardData.length == 1 && dashboardData[0].highestSellingProductViewModellst.length > 0" class="form-control custom_select" style="width:30%;margin-bottom: 10px;" (change)="filterAccToProduct($event.target.value)">
            <option disabled>{{'Select Product' | translate}}</option>
            <option value="0">{{'All' | translate}}</option>
            <option *ngFor="let products of bkUpTableList2[0].highestSellingProductViewModellst" value="{{products.itemId}}">
               {{products.itemName}}
            </option>
         </select>
      <div class="table-gridbox custom_gridbox">
         <table width="100%">
            <thead>
               <tr>
                  <th >{{'Product name' | translate}}</th>
                  <th>{{'Quantity' | translate}}</th>
                  <th  width="100">{{'Price' | translate}}</th>
               </tr>
            </thead>
            <tbody *ngFor="let rent of dashboardData; index as i">
               <tr *ngIf="loginData.userRole == 1">
                  <td class="bg-dark-franchise text-white" colspan="3"><strong>{{rent.franchiseName}}</strong></td>
               </tr>
               <tr *ngFor="let sellItems of rent.highestSellingProductViewModellst; index as j">
                  <td>
                     <img style="height: 50px;width: 50px;" src="{{sellItems!.productLogo || 'assets/images/customer-img.png'}}">
                     {{sellItems.itemName || 'N/A'}}
                  </td>
                  <td>{{sellItems!.quantity  || '--'}}</td>
                  <td><span class="text-center">{{currency}}{{sellItems.totalPrice == null ? '--' : sellItems.totalPrice | number:'0.2'}}</span>
                    <!--  <br>
                     <span class="cstm-total-cal" *ngIf="rent.highestSellingProductViewModellst.length == j+1 && rent.highestSellingProductViewModellst.length > 1">{{getTotal(i,j, rent.highestSellingProductViewModellst, rent.franchiseName)}}</span> -->
                  </td>
               </tr>
               <tr *ngIf="rent.highestSellingProductViewModellst && rent.highestSellingProductViewModellst.length > 0">
                  <td></td>
                  <td class="cstm-total-cal">
                     {{getTotal(i, rent.highestSellingProductViewModellst, rent.franchiseName, 'quantity')}}
                  </td>
                  <td class="cstm-total-cal">
                     {{currency}}{{getTotal(i, rent.highestSellingProductViewModellst, rent.franchiseName, 'price')}}
                  </td>
               </tr>
               <tr *ngIf="rent.highestSellingProductViewModellst && rent.highestSellingProductViewModellst.length < 1">
                  <td>
                     {{'Data Not Found!' | translate}}
                  </td>
               </tr>
               <tr *ngIf="dashboardData.length == i+1">
                  <td colspan="3">
                     <div echarts [options]="getPieChartsOption()" class="echart" style="height: 250px; width: 550px; margin: auto"></div>
                  </td>
               </tr>
            </tbody>
         </table>
      </div>
   </div>
</div>