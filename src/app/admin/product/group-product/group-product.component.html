<div class="p-2">
    <div class="franchise-sec1 cutm_tab_form">
        <div class="franchise-form mb-2">
            <div class="franchise-top-header">
                <h2 class="heading-name">   {{'Group Products' | translate}}
                    <!-- <span class="heading-name-span">{{franchiseData!.name || 'N/A'}}</span> -->
                </h2>
            </div>

			<!-- <form [formGroup]="itemForm"> -->
                <div class="row" style="min-height: 300px;">
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-6" data-aos="fade-down" data-aos-duration="800">

						<mat-tab-group>
						  	<mat-tab label="Details">
		                    	<form [formGroup]="itemForm">
			                        <div class="form-group row mt-2">
			                            <label for="email_address" class="col-md-4 col-form-label">{{'Franchise' | translate}}</label>
			                            <div class="col-md-8 form-err">
			                                <select formControlName="FranchiseId" (change)="_getCategory($event.target.value)"
			                                    class="form-control">
			                                    <option value=null disabled="">{{'Select' | translate}}</option>
			                                    <option value="{{franchise.franchiseId}}"
			                                        *ngFor="let franchise of formServiceData.franchiseList">
													{{franchise.franchiseName}}
												</option>
			                                </select>
			                                <div *ngIf="loginData.userRole == 1">
												<span
			                                    *ngIf="!itemForm.controls['FranchiseId'].valid && ( itemForm.controls['FranchiseId'].touched)">
			                                   {{' Please select franchise.' | translate}}
			                                </span>
											</div>
			                            </div>
			                        </div>
			                        <div class="form-group row mt-2">
			                            <label for="email_address" class="col-md-4 col-form-label">{{'Name' | translate}}</label>
			                            <div class="col-md-8 form-err">
			                                <input type="text" formControlName="ItemName" id="Username" class="form-control"
			                                    name="user-name">
			                                <span
			                                    *ngIf="!itemForm.controls['ItemName'].valid && ( itemForm.controls['ItemName'].touched)">
			                                    {{'Please enter group name.' | translate}}
			                                </span>
			                            </div>
			                        </div>
			                        <div class="form-group row mt-2">
			                            <label for="email_address" class="col-md-4 col-form-label">{{'Supplier' | translate}}</label>
			                            <div class="col-md-8 form-err">
			                                <select formControlName="SupplierId" class="form-control">
			                                    <option value=null disabled="">{{'Select' | translate}}</option>
			                                    <option value="{{supplier.supplierId}}"
			                                        *ngFor="let supplier of formServiceData.supplier">{{supplier.supplierName}}
			                                    </option>
			                                </select>
			                                <span
			                                    *ngIf="!itemForm.controls['SupplierId'].valid && ( itemForm.controls['SupplierId'].touched)">
			                                    {{'Please select Supplier.' | translate}}
			                                </span>
			                            </div>
			                        </div> 
			                        <div class="form-group row mt-2">
			                            <label for="email_address" class="col-md-4 col-form-label">{{'Category' | translate}}</label>
			                            <div class="col-md-8 form-err">
			                                <select formControlName="CategoryId" (change)="_getSubCategory($event.target.value)"
			                                    class="form-control">
			                                    <option value=null disabled="">{{'Select' | translate}}</option>
			                                    <option value="{{category.categoryId}}"
			                                        *ngFor="let category of formServiceData.category">{{category.categoryName}}
			                                    </option>
			                                </select>
			                                <span
			                                    *ngIf="!itemForm.controls['CategoryId'].valid && ( itemForm.controls['CategoryId'].touched)">
			                                    {{'Please select Category.' | translate}}
			                                </span>
			                            </div>
			                        </div>
			                        <div class="form-group row mt-2">
			                            <label for="email_address" class="col-md-4 col-form-label">{{'Subcategory' | translate}}</label>
			                            <div class="col-md-8 form-err">
			                                <select formControlName="SubCategoryId" class="form-control">
			                                    <option value=null disabled="">Select</option>
			                                    <option value="{{subCategory.categoryId}}"
			                                        *ngFor="let subCategory of formServiceData.subCategory">
			                                        {{subCategory.categoryName}}</option>
			                                </select>
			                                <span
			                                    *ngIf="!itemForm.controls['SubCategoryId'].valid && ( itemForm.controls['SubCategoryId'].touched)">
			                                   {{' Please select SubCategory.' | translate}}
			                                </span>
			                            </div>
			                        </div>
			                       <div class="form-group row mt-2">
			                            <label for="email_address" class="col-md-4 col-form-label">{{'Unit Category' | translate}}</label>
			                            <div class="col-md-8 form-err">
			                                <select formControlName="UnitCategoryId"
			                                    (change)="_getUnitMeasurment($event.target.value)" class="form-control">
			                                    <option value=null disabled="">{{'Select' | translate}}</option>
			                                    <option value="{{unitCategory.unitCategoryId}}"
			                                        *ngFor="let unitCategory of formServiceData.unitCategory">
			                                        {{unitCategory.unitCategoryName}}</option>
			                                </select>
			                                <span
			                                    *ngIf="!itemForm.controls['UnitCategoryId'].valid && ( itemForm.controls['UnitCategoryId'].touched)">
			                                    {{'Please select Unit Category.' | translate}}
			                                </span>
			                            </div>
			                        </div>
			               		    <div class="form-group row mt-2">
			                            <label for="email_address" class="col-md-4 col-form-label">{{'Unit Measurement' | translate}}</label>
			                            <div class="col-md-8 form-err">
			                                <select formControlName="UnitMeasurementId" class="form-control">
			                                    <option value=null disabled="">Select</option>
			                                    <option value="{{unitcategoryMeasurement.unitMeasurementId}}"
			                                        *ngFor="let unitcategoryMeasurement of formServiceData.unitcategoryMeasurement">
			                                        {{unitcategoryMeasurement.unitMeasurementName}}</option>
			                                </select>
			                                <span
			                                    *ngIf="!itemForm.controls['UnitMeasurementId'].valid && ( itemForm.controls['UnitMeasurementId'].touched)">
			                                    {{'Please select Unit Measurement.' | translate}}
			                                </span>
			                            </div>
			                        </div>
			                        <div class="form-group row  mt-2">
			                            <label for="email_address" class="col-md-4 col-form-label">{{'Item Total Price' | translate}}</label>
			                            <div class="col-md-3">
			                            	<!-- <span>{{cur}}</span> -->
			                                <input type="text"  formControlName="ItemtotalPrice" value=" {{productItemsGroup.totalPrice}}"  id="cartPrice" class="form-control"
			                                    name="cart-price">
			                            </div>
			                            <!-- <div class="col-md-5 form-err">
			                                <input type="text" formControlName="ItemSalePrice" id="Username" class="form-control"
			                                    name="user-name">
			                                <span
			                                    *ngIf="!itemForm.controls['ItemSalePrice'].valid && ( itemForm.controls['ItemSalePrice'].touched)">
			                                    Please enter Item Sale Price.
			                                </span>
			                            </div> -->
			                        </div>
			                         <div class="form-group row mt-2">
			                            <label for="email_address" class="col-md-4 col-form-label">{{'Item Rent Price' | translate}}</label>
			                            <div class="col-md-8 form-err">
			                                <input type="text" formControlName="ItemRentPrice" id="itemRentPrice" class="form-control"
			                                    name="user-name">
			                                <span
			                                    *ngIf="!itemForm.controls['ItemRentPrice'].valid && ( itemForm.controls['ItemRentPrice'].touched)">
			                                   {{' Please enter Item Rent Price.' | translate}}
			                                </span>
			                            </div>
									</div> 
									<div class="form-group row mt-2">
			                            <label for="email_address" class="col-md-4 col-form-label">{{'Item Sale Price' | translate}}</label>
			                            <div class="col-md-8 form-err">
			                                <input type="text" formControlName="ItemsalePrice" id="itemSalePrice" class="form-control"
			                                    name="user-name">
			                                <span
			                                    *ngIf="!itemForm.controls['ItemsalePrice'].valid && ( itemForm.controls['ItemsalePrice'].touched)">
			                                    {{'Please enter Item sale Price.' | translate}}
			                                </span>
			                            </div>
									</div> 
									<div class="form-group row mt-2">
			                            <label for="email_address" class="col-md-4 col-form-label">{{'Minimum Stock' | translate}}</label>
			                            <div class="col-md-8 form-err">
			                                <input type="text" formControlName="MinimumStock" id="Username" class="form-control"
			                                    name="user-name">
			                                <span
			                                    *ngIf="!itemForm.controls['MinimumStock'].valid && ( itemForm.controls['MinimumStock'].touched)">
			                                    {{'Please enter Item stock.' | translate}}
			                                </span>
			                            </div>
			                        </div> 
			                        <div class="form-group row mt-2">
			                            <label for="email_address" class="col-md-4 col-form-label">{{'Manufactured Date' | translate}}</label>
			                            <div class="col-md-8 form-err">
			                                <input type="date" formControlName="ManufacturedDate" id="Username" class="form-control"
			                                    name="user-name">
			                                <span
			                                    *ngIf="!itemForm.controls['ManufacturedDate'].valid && ( itemForm.controls['ManufacturedDate'].touched)">
			                                    {{'Please select Manufactured Date.' | translate}}
			                                </span>
			                            </div>
			                        </div>
			                        <div class="form-group row mt-2">
			                            <label for="email_address" class="col-md-4 col-form-label">{{'Packing Date' | translate}}</label>
			                            <div class="col-md-8 form-err">
			                                <input type="date" formControlName="PackingDate" id="Username" class="form-control"
			                                    name="user-name">
			                                <span
			                                    *ngIf="!itemForm.controls['PackingDate'].valid && ( itemForm.controls['PackingDate'].touched)">
			                                    {{'Please select Packing Date.' | translate}}
			                                </span>
			                            </div>
			                        </div>
			                        <div class="form-group row mt-2">
			                            <label for="email_address" class="col-md-4 col-form-label">{{'Discount' | translate}}</label>
			                            <div class="col-md-8 form-err">
			                                <input type="text" formControlName="Discount" id="Username" class="form-control"
			                                    name="user-name">
			                                <span
			                                    *ngIf="!itemForm.controls['Discount'].valid && ( itemForm.controls['Discount'].touched)">
			                                    {{'Please enter Discount.' | translate}}
			                                </span>
			                            </div>
			                        </div>
			                       <div class="form-group row mt-2">
			                            <label for="email_address" class="col-md-4 col-form-label">{{'Quantity Stock' | translate}}</label>
			                            <div class="col-md-8 form-err">
			                                <input type="text" formControlName="QuantityStock" id="Username" class="form-control"
			                                    name="user-name">
			                                <span
			                                    *ngIf="!itemForm.controls['QuantityStock'].valid && ( itemForm.controls['QuantityStock'].touched)">
			                                    {{'Please enter Quantity Stock.' | translate}}
			                                </span>
			                            </div>
			                        </div>
			                        <div class="form-group row mt-2">
			                            <label for="email_address" class="col-md-4 col-form-label">{{'Sku' | translate}}</label>
			                            <div class="col-md-8 form-err">
			                                <input type="text" formControlName="Sku" id="Username" class="form-control"
			                                    name="user-name">
			                                <span *ngIf="!itemForm.controls['Sku'].valid && ( itemForm.controls['Sku'].touched)">
			                                    {{'Please enter Sku.' | translate}}
			                                </span>
			                            </div>
			                        </div>
			                        <div class="form-group row mt-2">
			                            <label for="email_address" class="col-md-4 col-form-label">{{'Barcode' | translate}}</label>
			                            <div class="col-md-8 form-err">
			                                <input type="text" formControlName="Barcode" id="Username" class="form-control"
			                                    name="user-name">
			                                <span
			                                    *ngIf="!itemForm.controls['Barcode'].valid && ( itemForm.controls['Barcode'].touched)">
			                                    {{'Please enter Barcode.' | translate}}
			                                </span>
			                            </div>
			                        </div>
			                        <div class="form-group row pt-2 mt-2">
			                            <label for="Product" class="col-md-4 col-form-label">{{'Tax Manage' | translate}}</label>
			                            <div class="col-md-8">
											<ng-multiselect-dropdown
												formControlName="Tax"
												[placeholder]="'Select Tax'"
												[data]="elements"
												[settings]="dropdownSettings"
												(onSelect)="onItemSelect($event)"
												(onSelectAll)="onSelectAll($event)"
											></ng-multiselect-dropdown>
											<!-- <span *ngIf="!itemForm.controls['Tax'].valid && ( itemForm.controls['Tax'].touched)">
											Please enter Tax.
											</span> -->
			                                <div class="form-err">
			                                    <span
			                                        *ngIf="!itemForm.controls['Tax'].valid && ( itemForm.controls['Tax'].touched)">
			                                        {{'Please select Tax Name.' | translate}}
			                                    </span>
			                                </div>
			                         	</div>
			                        </div> 
			                        <div class="form-group row mt-2">
			                            <label for="email_address" class="col-md-4 col-form-label">{{'Expiration Date' | translate}}</label>
			                            <div class="col-md-8 form-err">
			                                <input type="date" min="{{dateSelect.doiMin}}" onkeydown="return false" formControlName="ExpirationDate" id="Username" class="form-control"
			                                    name="user-name">
			                                <span
			                                    *ngIf="!itemForm.controls['ExpirationDate'].valid && ( itemForm.controls['ExpirationDate'].touched)">
			                                    {{'Please select Expiration Date.' | translate}}
			                                </span>
			                            </div>
			                        </div>
			                        <div class="form-group row pt-2 mt-2">
			                            <label for="email_address" class="col-md-4 col-form-label">{{'Is Rented' | translate}}</label>
			                            <div class="col-md-8 form-err mt-2">
			                                <div class="form-check form-check-inline">
			                                    <input class="form-check-input" formControlName="IsRented" type="radio"
			                                        id="inlineRadio1" (click)="setRent('true')"
			                                        [checked]="itemForm.value.IsRented == true" value="true">
			                                    <label class="form-check-label" for="inlineRadio1">{{'Yes' | translate}}</label>
			                                </div>
			                                <div class="form-check form-check-inline">
			                                    <input class="form-check-input" formControlName="IsRented" type="radio"
			                                        id="inlineRadio2" (click)="setRent('false')" value="false"
			                                        [checked]="itemForm.value.IsRented == false">
			                                    <label class="form-check-label" for="inlineRadio2">{{'No' | translate}}</label>
			                                </div>
			                                <span
			                                    *ngIf="!itemForm.controls['IsRented'].valid && ( itemForm.controls['IsRented'].touched)">
			                                    {{'Please select Rent option.' | translate}}
			                                </span>
			                            </div>
			                        </div> 
			                         <div class="form-group row mt-2" id="Security" style="display:none;">
			                            <label for="email_address" class="col-md-4 col-form-label">{{'Security' | translate}}</label>
			                            <div class="col-md-8 form-err">
			                                <input type="text" formControlName="security" class="form-control" name="Security">
			                                <span
			                                    *ngIf="!itemForm.controls['security'].valid && ( itemForm.controls['security'].touched)">
			                                    {{'Please enter Security.' | translate}}
			                                </span>
			                            </div>
			                        </div>
			                        <div class="form-group row mt-2">
			                            <label for="email_address" class="col-md-4 col-form-label">{{'Description' | translate}}</label>
			                            <div class="col-md-8 form-err">
			                                <input type="text" formControlName="Description" id="Username" class="form-control"
			                                    name="user-name">
			                                <span
			                                    *ngIf="!itemForm.controls['Description'].valid && ( itemForm.controls['Description'].touched)">
			                                    {{'Please enter Description.' | translate}}
			                                </span>
			                            </div>
			                        </div>
			                        <div class="form-group row pt-2 mt-2">
			                            <label for="email_address" class="col-md-4 col-form-label">{{'Item Image' | translate}}</label>
			                            <div class="col-xs-12 col-sm-8 col-md-8 col-lg-8">
			                                <div class="row form-group-file">
			                                    <div class="col-xs-12 col-sm-10 col-md-10 col-lg-10 file-upload form-err pl-0">
			                                        <input (change)="onUpload($event)" formControlName="ProductLogo" id="file-upload1" type="file" />
			                                    </div>
			                                    <div class="col-xs-12 col-sm-2 col-md-2 col-lg-2 frm-img pr-0">
			                                        <div>
			                                            <img src="{{itemImage != null && itemImage || 'assets/images/franchise_logo_placeholder.png'}}">
			                                        </div>
			                                    
			                                    </div>
			                                </div>
			                            </div>
			                        </div>

		                    	</form>

		                        <div class="form-group row m-0">
		                            <div class="col-md-4 col-lg-2"></div>
		                            <div class="col-md-8 col-lg-10 mt-3">
		                                <button class="btn btn-info submit sm-btn" (click)="onSubmit()"> {{id != null ? 'Update':'Submit' | translate}}</button>
		                                <input type="button" class="btn btn-info cancel" (click)="onCancel()" value="{{'Cancel' | translate}}">
		                            </div>
		                        </div>
						  	</mat-tab>
						 
						  	<mat-tab label="Products ({{productItemsGroup.itemArr.length}})">
								<div class="container pl-0 pr-0">
								  <!-- <h2>Basic Table</h2> -->
								  <!-- <p>The .table class adds basic styling (light padding and only horizontal dividers) to a table:</p>             -->
								  <div class="cstm-data-tbl">
								  <table class="table">
								    <thead>
								      <tr>
								        <th>{{'Name' | translate}}</th>
								        <th>{{'Sale Price' | translate}}</th>
								        <th>{{'Quantity' | translate}}</th>
								      </tr>
								    </thead>
								    <tbody>
								      <tr  *ngFor="let item of productItemsGroup.itemArr; index as i">
								        <td>{{item!.name || '--'}}</td>
								        <td>{{cur}}{{item!.price || '--'}}</td>
								        <td class="custm_quantity"><div class="input-group"><span class="input-group-btn"><button class="quantity-left-minus btn-number" data-field="" data-type="minus" type="button" (click)="addEditItemInCart('minus', i, item)"><span  class="mdi mdi-minus"></span></button></span><input class="form-control input-number quntity_custm" disabled="disabled" id="quantity" max="100" min="1" value="{{item!.qty || '--'}}" name="quantity" type="text"><span  class="input-group-btn"><button class="quantity-right-plus btn-number" data-field="" data-type="plus" type="button" class="quantity-left-minus btn-number" data-field="" data-type="minus" type="button" (click)="addEditItemInCart('plus', i, item)"><span  class="mdi mdi-plus"></span></button></span>
										<ul class="list-inline list-btn-td">
                                    		<li class="list-inline-item trash-btn"><a class="btn btn-danger btn-sm"
                                            href="javascript:void(0);" (click)="deleteItemFromBasket(item, i)"><i
                                                class="fa fa-trash"></i></a></li>
                                		</ul></div></td>
								      </tr>
								      <tr *ngIf="productItemsGroup.itemArr.length < 1">
								      	<td>
								      		Please add items.
								      	</td>
								      </tr>
								    </tbody>
								  </table>
								</div>
								</div>
						  	</mat-tab>
						</mat-tab-group>

                    </div>
                    <!-- hdbsvfd
		            ds
		            dvs
		            v
		            sd
		            fv -->
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-6">
					    <div class="table-gridbox" data-aos="fade-down" data-aos-duration="800">
					    <mat-card>
					     <mat-form-field>
					            <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filter">
					        </mat-form-field>
					        <div class="mat-elevation-z8">
					            <div class="table-responsive">
					                <table mat-table [dataSource]="dataSource" matSort>
					                    <!-- Symbol Column -->
					                    
					                    <!-- Name Column -->
					                    <ng-container matColumnDef="itemName">
					                        <th mat-header-cell *matHeaderCellDef mat-sort-header> {{'Item Name' | translate}} </th>
					                        <td mat-cell *matCellDef="let element"><span class="product-name-right">{{element!.itemName || '--'}}</span></td>
					                    </ng-container>
					                    <!-- Weight Column -->
					                    <ng-container matColumnDef="sku">
					                        <th mat-header-cell *matHeaderCellDef mat-sort-header> {{'SKU' | translate}} </th>
					                        <td mat-cell *matCellDef="let element"> <span class="product-name-right">{{element!.sku || '--'}}</span> </td>
					                    </ng-container>
					                    <!-- Symbol Column -->
					                    <ng-container matColumnDef="itemSalePrice">
					                        <th width="150" mat-header-cell *matHeaderCellDef > {{'Sale Price' | translate}} </th>
					                        <td mat-cell *matCellDef="let element">
					                        	
					                            <ul class="list-inline list-btn-td">
					                            	<li class="list-inline-item edit-pen-btn"><strong class="strong-label">{{cur}}{{element!.itemSalePrice || '--'}} </strong><a class="btn btn-primary btn-sm width-auto"  (click)="addItem(element)"><i class="" style="margin: 0 8px; color: #fff; cursor: pointer;" aria-hidden="true"> Add </i></a></li>
					                           <!--  <li class="list-inline-item edit-user-btn"><a class="btn btn-danger btn-sm" href="javascript:void(0);" (click)="openDelete(element.categoryId)"><i class="fa fa-trash"></i></a></li> -->
					                        	</ul>
					                        </td>
					                    </ng-container>
					                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
					                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
					                </table>
					                    <!-- <span>Data not available!</span> -->
					            </div>
					            <!-- <mat-paginator class="cstm_pagination" [length]="length"
					              [pageSize]="pageSize"
					              [pageSizeOptions]="pageSizeOptions">
					            </mat-paginator> -->
					        </div>
					    </mat-card>
					    </div>
                    </div>
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                      <!--   <div class="form-group row m-0">
                            <div class="col-md-4 col-lg-2"></div>
                            <div class="col-md-8 col-lg-10 mt-3">
                                <button class="btn btn-info submit sm-btn" (click)="onSubmit()" > Submit</button>
                                <input type="button" class="btn btn-info cancel" (click)="onCancel()" value="Cancel">
                            </div>
                        </div> -->
                    </div>
                </div>
            <!-- </form> -->

        </div>
    </div>
</div>